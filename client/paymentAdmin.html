<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="/css/fonts.css">
    <link rel="stylesheet" href="/css/paymentAdmin.css">
    <link rel="stylesheet" href="/css/navigation.css">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon/favicon-32x32.png">
    <title>Manage Payment</title>
</head>

<body>
    <div class="overlay" id="overlay"></div>

    <div id="sidebarContainer"></div>
    <div id="navbarContainer"></div>

    <div class="main-content">
        <div class="container">
            <!-- Breadcrumb Navigation -->
            <div class="breadcrumb-container">
                <nav class="breadcrumb-nav">
                    <a href="/adminDashboard.html">
                        <i class="fas fa-home"></i>
                        Dashboard
                    </a>
                    <span class="breadcrumb-separator">></span>
                    <span class="breadcrumb-current">Payment Management</span>
                </nav>
            </div>

            <!-- Enhanced Statistics Grid -->
            <div class="stats-grid fade-in">
                <div class="stat-card outstanding" onclick="filterByStatus('outstanding')">
                    <div class="stat-icon">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="outstanding-charges">0</div>
                        <div class="stat-label">Outstanding Charges</div>
                        <div class="stat-description">Unpaid & overdue</div>
                    </div>
                </div>
                <div class="stat-card collected" onclick="filterByStatus('paid')">
                    <div class="stat-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="collected-amount">₱0</div>
                        <div class="stat-label">Collected This Month</div>
                        <div class="stat-description">Successfully received</div>
                    </div>
                </div>
                <div class="stat-card pending" onclick="filterByStatus('pending')">
                    <div class="stat-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="pending-charges">0</div>
                        <div class="stat-label">Pending Payments</div>
                        <div class="stat-description">Awaiting payment</div>
                    </div>
                </div>
                <div class="stat-card revenue">
                    <div class="stat-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-number" id="total-revenue">₱0</div>
                        <div class="stat-label">Total Revenue</div>
                        <div class="stat-description">All time collections</div>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="charges" onclick="switchTab('charges')">
                        <i class="fas fa-file-invoice"></i>
                        <span>Charges Management</span>
                    </button>
                    <button class="tab-button" data-tab="payments" onclick="switchTab('payments')">
                        <i class="fas fa-wallet"></i>
                        <span>Payments Management</span>
                    </button>
                </div>
            </div>

            <!-- Tab Content Container -->
            <div class="tab-content-container">
                <!-- Charges Tab Content -->
                <div class="tab-content active" id="charges-tab">
                    <div class="table-section fade-in">
                        <div class="section-header charges">
                            <div class="section-title">
                                <i class="fas fa-file-invoice"></i>
                                All Charges
                            </div>
                        </div>

                        <!-- Charges Filter Section -->
                        <div class="filter-section">
                            <div class="filter-grid">
                                <div class="filter-item">
                                    <label>Search Tenant/Unit</label>
                                    <input type="text" id="charges-search" placeholder="Search..."
                                        oninput="filterCharges()">
                                </div>
                                <div class="filter-item">
                                    <label>Charge Type</label>
                                    <select id="charges-type" onchange="filterCharges()">
                                        <option value="">All Types</option>
                                        <option value="rent">Rent</option>
                                        <option value="utility">Utility</option>
                                        <option value="maintenance">Maintenance</option>
                                        <option value="penalty">Penalty</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label>Status</label>
                                    <select id="charges-status" onchange="filterCharges()">
                                        <option value="">All Statuses</option>
                                        <option value="overdue">Overdue</option>
                                        <option value="due-soon">Due Soon</option>
                                        <option value="pending">Pending</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <label>Due Date</label>
                                    <input type="month" id="charges-date" onchange="filterCharges()">
                                </div>
                                <div class="filter-item">
                                    <label>Group by</label>
                                    <select id="charges-group-by" onchange="filterCharges()">
                                        <option value="none">None</option>
                                        <option value="tenant">Tenant</option>
                                        <option value="status" selected>Status</option>
                                    </select>
                                </div>
                                <div class="filter-item">
                                    <button class="btn btn-secondary" onclick="resetChargesFilters()">
                                        <i class="fas fa-refresh"></i> Reset
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Charges Table Content -->
                        <div class="content-area">
                            <!-- Table Header with Stats and Button -->
                            <div class="table-header-row">
                                <div class="table-stats">
                                    <div class="section-stat" id="charges-total-stat">0 Total</div>
                                    <div class="section-stat" id="charges-overdue-stat">0 Overdue</div>
                                    <div class="section-stat" id="charges-active-stat">0 Active</div>
                                </div>
                                <button class="btn btn-primary table-action-btn" onclick="addNewCharge()">
                                    <i class="fas fa-plus"></i> Add Charge
                                </button>
                            </div>

                            <!-- Desktop Charges Table -->
                            <div class="table-container">
                                <table class="data-table charges-table">
                                    <thead>
                                        <tr>
                                            <th class="th-number">#</th>
                                            <th class="th-tenant sortable" onclick="sortTable('tenant')">Tenant</th>
                                            <th class="th-unit sortable" onclick="sortTable('unit')">Unit</th>
                                            <th class="th-type sortable" onclick="sortTable('type')">Type</th>
                                            <th class="th-description sortable" onclick="sortTable('description')">
                                                Description</th>
                                            <th class="th-total sortable" onclick="sortTable('amount')">Total Amount
                                            </th>
                                            <th class="th-paid sortable" onclick="sortTable('paid')">Paid Amount</th>
                                            <th class="th-status sortable" onclick="sortTable('status')">Status</th>
                                            <th class="th-due sortable" onclick="sortTable('dueDate')">Due Date</th>
                                            <th class="th-actions">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="charges-tbody">
                                        <!-- Content will be populated by JavaScript -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Pagination for All Charges -->
                            <div class="pagination-bar" id="charges-pagination"></div>

                            <!-- Mobile Charges Cards -->
                            <div class="mobile-cards" id="charges-mobile">
                                <!-- Content will be populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payments Tab Content -->
                <div class="tab-content" id="payments-tab">
                    <div class="table-section fade-in">
                        <div class="section-header payments">
                            <div class="section-title">
                                <i class="fas fa-wallet"></i>
                                Payments Management
                            </div>
                            <div class="section-stats">
                                <div class="section-stat" id="payments-count-stat">0 Payments</div>
                                <div class="section-stat" id="payments-amount-stat">₱0 Collected</div>
                                <div class="section-stat" id="payments-month-stat">This Month: ₱0</div>
                            </div>
                        </div>

                        <!-- View Toggle Switch -->
                        <div class="view-toggle-container">
                            <button class="view-toggle-btn active" data-view="pending" onclick="switchPaymentView('pending')">
                                <i class="fas fa-hourglass-half"></i>
                                <span>Process Payments</span>
                            </button>
                            <button class="view-toggle-btn" data-view="all" onclick="switchPaymentView('all')">
                                <i class="fas fa-list"></i>
                                <span>Payment History</span>
                            </button>

                        </div>

                        <!-- All Payments View -->
                        <div class="payment-view-content" id="all-payments-view">
                            <!-- Payment History Filter Section -->
                            <div class="filter-section">
                                <div class="filter-grid">
                                    <div class="filter-item">
                                        <label>Search Tenant/Unit</label>
                                        <input type="text" id="payments-search" placeholder="Search..."
                                            oninput="filterPayments()">
                                    </div>
                                    <div class="filter-item">
                                        <label>Payment Method</label>
                                        <select id="payments-method" onchange="filterPayments()">
                                            <option value="">All Methods</option>
                                            <option value="cash">Cash</option>
                                            <option value="gcash">GCash</option>
                                        </select>
                                    </div>
                                    <div class="filter-item">
                                        <label>Payment Type</label>
                                        <select id="payments-type" onchange="filterPayments()">
                                            <option value="">All Types</option>
                                            <option value="rent">Rent Payment</option>
                                            <option value="utility">Utility Payment</option>
                                            <option value="maintenance">Maintenance Payment</option>
                                            <option value="penalty">Penalty Payment</option>
                                        </select>
                                    </div>
                                    <div class="filter-item">
                                        <label>Payment Date</label>
                                        <input type="month" id="payments-date" onchange="filterPayments()">
                                    </div>
                                    <div class="filter-item">
                                        <button class="btn btn-secondary" onclick="resetPaymentsFilters()">
                                            <i class="fas fa-refresh"></i> Reset
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Payment History Table Content -->
                            <div class="content-area">
                                <!-- Desktop Payment History Table -->
                                <div class="table-container">
                                    <table class="data-table payments-table">
                                        <thead>
                                            <tr>
                                                <th class="th-number">#</th>
                                                <th>Reference
                                                    <button class="col-toggle" title="Show/Hide Reference" onclick="toggleReferenceVisibility()" style="margin-left:8px; background:none; border:none; cursor:pointer; color:#64748b">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </th>
                                                <th>Tenant</th>
                                                <th>Unit</th>
                                                <th>Description</th>
                                                <th>Amount</th>
                                                <th>Method</th>
                                                <th>Notes</th>
                                                <th>Payment Date</th>
                                                <th>Status</th>
                                                <th>Processed By</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="payments-tbody">
                                            <!-- Content will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Mobile Payment History Cards -->
                                <div class="mobile-cards" id="payments-mobile">
                                    <!-- Content will be populated by JavaScript -->
                                </div>
                                <div class="pagination-bar" id="payments-pagination"></div>
                            </div>
                        </div>

                        <!-- Pending Payments View -->
                        <div class="payment-view-content active" id="pending-payments-view">
                            <!-- Status Filter Tabs -->
                            <div class="pending-status-tabs">
                                <button class="pending-tab-btn active" data-status="Pending"
                                    onclick="filterPendingByStatus('Pending')">
                                    <i class="fas fa-hourglass-half"></i>
                                    <span>Pending</span>
                                    <span class="tab-badge" id="pending-count-badge">0</span>
                                </button>
                                <button class="pending-tab-btn" data-status="Confirmed"
                                    onclick="filterPendingByStatus('Confirmed')">
                                    <i class="fas fa-check-circle"></i>
                                    <span>Approved</span>
                                    <span class="tab-badge" id="approved-count-badge">0</span>
                                </button>
                                <button class="pending-tab-btn" data-status="Rejected"
                                    onclick="filterPendingByStatus('Rejected')">
                                    <i class="fas fa-times-circle"></i>
                                    <span>Rejected</span>
                                    <span class="tab-badge" id="rejected-count-badge">0</span>
                                </button>
                            </div>

                            <!-- Pending Payments Filter Section -->
                            <div class="filter-section">
                                <div class="filter-grid">
                                    <div class="filter-item">
                                        <label>Search Tenant/Charge</label>
                                        <input type="text" id="pending-search" placeholder="Search..."
                                            oninput="filterPendingPayments()">
                                    </div>
                                    <div class="filter-item">
                                        <label>Date Range</label>
                                        <input type="month" id="pending-date" onchange="filterPendingPayments()">
                                    </div>
                                    <div class="filter-item">
                                        <button class="btn btn-secondary" onclick="resetPendingFilters()">
                                            <i class="fas fa-refresh"></i> Reset
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Pending Payments Table Content -->
                            <div class="content-area">
                                <!-- Desktop Pending Payments Table -->
                                <div class="table-container">
                                    <table class="data-table pending-payments-table">
                                        <thead>
                                            <tr>
                                                <th class="th-number">#</th>
                                                <th>Payment ID</th>
                                                <th>Tenant</th>
                                                    <th>Description</th>
                                                    <th>Charge Type</th>
                                                    <th>Due Date</th>
                                                    <th>Amount</th>
                                                <th>Method</th>
                                                <th>Submitted</th>
                                                <th>Proofs</th>
                                                    <th class="col-processed-by">Processed By</th>
                                                    <th class="col-processed-at">Processed At</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="pending-payments-tbody">
                                            <!-- Content will be populated by JavaScript -->
                                        </tbody>
                                    </table>
                                </div>

                                <!-- Mobile Pending Payments Cards -->
                                <div class="mobile-cards" id="pending-payments-mobile">
                                    <!-- Content will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </div>

    <script src="/constants/constants.js"></script>
    <script type="module" src="/javascript/paymentAdmin.js"></script>
    <script src="/javascript/navigations.js"></script>
</body>

</html>